
CREATE TABLE wahlkreis (
	nr INT,
	jahr INT,
	name VARCHAR(20),
	sitzzahl INT,
	PRIMARY KEY(nr,jahr));
CREATE TABLE stimmkreis (
	nr INT,
	jahr INT,
	name VARCHAR(20),
	wahlkreisnr INT,
	PRIMARY KEY(nr,jahr),
	FOREIGN KEY (wahlkreisnr,jahr) REFERENCES wahlkreis ON DELETE CASCADE);
CREATE TABLE partei (
	id INT PRIMARY KEY,
	abkuerzung NVARCHAR(10),
	name NVARCHAR(20),
	farbe VARCHAR(6),
	mitgliederzahl INT);
CREATE TABLE kandidat (
	id INT PRIMARY KEY,
	titel VARCHAR(10),
	vorname NVARCHAR(20),
	nachname NVARCHAR(20),
	geschlecht VARCHAR(1),
	geburtstag DATE,
	beruf VARCHAR(20),
	partei INT REFERENCES partei);
CREATE TABLE wahlkreisliste (
	kandidat INT REFERENCES kandidat,
	jahr INT,
	wahlkreisnr INT,
	kandidatpos INT,
	PRIMARY KEY(kandidat,jahr),
	FOREIGN KEY (wahlkreisnr,jahr) REFERENCES wahlkreis ON DELETE CASCADE);
CREATE TABLE stimmkreisliste (
	kandidat INT REFERENCES kandidat,
	jahr INT,
	stimmkreisnur INT,
	kandidatpos INT,
	PRIMARY KEY(kandidat,jahr),
	FOREIGN KEY (stimmkreisnur,jahr) REFERENCES stimmkreis ON DELETE CASCADE);
CREATE TABLE erststimme (
	id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	kandidat INT REFERENCES kandidat,
	jahr INT);
CREATE TABLE zweitstimmepartei (
	id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	stimmkreisnr INT,
	jahr INT,
	parteinr INT REFERENCES partei,
	FOREIGN KEY (stimmkreisnr,jahr) REFERENCES stimmkreis);
);
CREATE TABLE zweitstimmekandidat (
	id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	stimmkreisnr INT,
	jahr INT,
	kandidatnr INT REFERENCES kandidat,
	FOREIGN KEY (stimmkreisnr,jahr) REFERENCES stimmkreis);
);
