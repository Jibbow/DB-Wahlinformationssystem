/*
 * SQL SCHEMA definition for SAP HANA
 */

CREATE SCHEMA WIS;
GRANT SELECT ON SCHEMA WIS to _SYS_REPO WITH GRANT OPTION; /* Allow creating "views" on this schema */

CREATE TABLE WIS.WAHLKREIS (
	nr INT,
	name VARCHAR(13),
	sitzzahl INT,
	PRIMARY KEY(nr));

CREATE TABLE WIS.STIMMKREIS (
	nr INT,
	jahr INT,
	name VARCHAR(20),
	wahlkreis INT,
	PRIMARY KEY(nr,jahr),
	FOREIGN KEY (wahlkreis) REFERENCES WIS.WAHLKREIS ON DELETE CASCADE);

CREATE TABLE WIS.PARTEI (
	id INT PRIMARY KEY,
	abkuerzung NVARCHAR(20),
	name NVARCHAR(93),
	farbe VARCHAR(6));

CREATE TABLE WIS.KANDIDAT (
	id INT PRIMARY KEY,
	titel VARCHAR(10),
	vorname NVARCHAR(20),
	nachname NVARCHAR(20),
	geschlecht VARCHAR(1),
	partei INT REFERENCES WIS.PARTEI);

CREATE TABLE WIS.WAHLKREISLISTE (
	kandidat INT REFERENCES WIS.KANDIDAT,
	jahr INT,
	wahlkreis INT,
	kandidatpos INT,
	PRIMARY KEY (kandidat,jahr),
	FOREIGN KEY (wahlkreis) REFERENCES WIS.WAHLKREIS ON DELETE CASCADE);

CREATE TABLE WIS.STIMMKREISLISTE (
	kandidat INT REFERENCES WIS.KANDIDAT,
	jahr INT,
	stimmkreis INT,
	kandidatpos INT,
	PRIMARY KEY(kandidat,jahr),
	FOREIGN KEY (stimmkreis,jahr) REFERENCES WIS.STIMMKREIS ON DELETE CASCADE);

CREATE TABLE WIS.ERSTSTIMME (
	kandidat INT REFERENCES WIS.KANDIDAT,
	stimmkreis INT,
	jahr INT,
	FOREIGN KEY (stimmkreis, jahr) REFERENCES WIS.STIMMKREIS);

CREATE TABLE WIS.ZWEITSTIMMEPARTEI (
	parteiId INT REFERENCES WIS.PARTEI,
	stimmkreis INT,
	jahr INT,
	FOREIGN KEY (stimmkreis,jahr) REFERENCES WIS.stimmkreis);

CREATE TABLE WIS.ZWEITSTIMMEKANDIDAT (
	kandidat INT REFERENCES WIS.KANDIDAT,
	stimmkreis INT,
	jahr INT,
	FOREIGN KEY (stimmkreis,jahr) REFERENCES WIS.STIMMKREIS);

